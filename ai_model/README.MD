# API de PrediÃ§Ã£o de Desempenho de Alunos

Uma API desenvolvida com **FastAPI** para prever o desempenho de alunos com base em diversos fatores socioeconÃ´micos e de estudo. O projeto utiliza modelos de Machine Learning (RegressÃ£o LogÃ­stica e Random Forest) e expÃµe as prediÃ§Ãµes atravÃ©s de um endpoint RESTful.

A aplicaÃ§Ã£o Ã© totalmente containerizada com **Docker** para garantir portabilidade, consistÃªncia entre ambientes e facilidade de deploy.

## âœ¨ Funcionalidades

-   **Endpoint de PrediÃ§Ã£o (`/predict/performance`):** Recebe dados de um aluno e retorna a probabilidade de aprovaÃ§Ã£o.
-   **ValidaÃ§Ã£o de Dados:** Utiliza Pydantic para garantir que os dados de entrada estejam no formato correto.
-   **Explicabilidade (XAI):** Integra a biblioteca SHAP para explicar quais fatores mais influenciaram cada prediÃ§Ã£o.
-   **DocumentaÃ§Ã£o AutomÃ¡tica:** Gera documentaÃ§Ã£o interativa (Swagger UI) automaticamente, disponÃ­vel em `/docs`.
-   **ContainerizaÃ§Ã£o:** Pronta para ser executada em qualquer ambiente com Docker.

## ğŸ“‹ PrÃ©-requisitos

Antes de comeÃ§ar, garanta que vocÃª tenha os seguintes softwares instalados na sua mÃ¡quina:

-   [Docker Desktop](https://www.docker.com/products/docker-desktop/) (ou Docker Engine no Linux)
-   [Python 3.10+](https://www.python.org/downloads/) (necessÃ¡rio para a execuÃ§Ã£o local)
-   Um cliente de API como [Postman](https://www.postman.com/) ou [Insomnia](https://insomnia.rest/) (opcional, para testes)

## ğŸ“ Estrutura do Projeto

```text
/ai_model/
â”œâ”€â”€ .gitignore
â”œâ”€â”€ app.py
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt
â””â”€â”€ src/
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ datasets/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ StudentPerformanceFactors.csv
    â”‚   â”œâ”€â”€ xAPI-dropout.csv
    â”‚   â””â”€â”€ xAPI-Edu-Data.csv
    â”œâ”€â”€ models/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ analyse_feature.py
    â”‚   â”œâ”€â”€ compareModels.py
    â”‚   â”œâ”€â”€ explicability.py
    â”‚   â”œâ”€â”€ preview.py
    â”‚   â”œâ”€â”€ trainingDropoutModel.py
    â”‚   â”œâ”€â”€ trainingLinearRegression.py
    â”‚   â”œâ”€â”€ trainingLogisticRegression.py
    â”‚   â”œâ”€â”€ trainingLREvasion.py
    â”‚   â””â”€â”€ trainingRandomForest.py
    â”œâ”€â”€ normalized/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ datasetEvasionProcess.py
    â”‚   â””â”€â”€ datasetProcessorStudentPer.py
    â””â”€â”€ pipelines/
        â”œâ”€â”€ dropout_logreg_model.pkl
        â”œâ”€â”€ dropout_preprocess.pkl
        â”œâ”€â”€ perf_logreg_model.pkl
        â”œâ”€â”€ perf_preprocess.pkl
        â”œâ”€â”€ perf_reglin_model.pkl
        â””â”€â”€ perf_rf_model.pkl
```

## ğŸš€ Como Executar

Existem duas maneiras de executar a aplicaÃ§Ã£o: utilizando Docker (recomendado) ou em um ambiente Python local.

### MÃ©todo 1: Usando Docker (Recomendado)

Esta Ã© a forma mais simples e garantida de executar o projeto, pois todas as dependÃªncias sÃ£o gerenciadas dentro do container.

1.  **Clone o repositÃ³rio** (se aplicÃ¡vel) e navegue atÃ© a pasta raiz do projeto.

2.  **Construa a imagem Docker:**
    Abra o terminal na pasta raiz (onde o `Dockerfile` estÃ¡ localizado) e execute o comando:
    ```bash
    docker build -t api-predicao-alunos .
    ```

3.  **Execute o container:**
    ApÃ³s a imagem ser construÃ­da com sucesso, inicie um container a partir dela:
    ```bash
    docker run -p 5000:5000 --name servico-api api-predicao-alunos
    ```
    * A flag `-p 5000:5000` mapeia a porta do container para a sua mÃ¡quina local.
    * Para rodar em segundo plano (detached mode), adicione a flag `-d`: `docker run -d -p 5000:5000 ...`

A API estarÃ¡ disponÃ­vel em `http://localhost:5000`.

### MÃ©todo 2: Ambiente Python Local (Alternativo)

1.  **Crie e ative um ambiente virtual:**
    ```bash
    # Cria o ambiente
    python -m venv venv

    # Ativa no Windows
    .\venv\Scripts\activate

    # Ativa no Linux/macOS
    source venv/bin/activate
    ```

2.  **Instale as dependÃªncias:**
    ```bash
    pip install -r requirements.txt
    ```

3.  **Inicie o servidor Uvicorn:**
    A partir da pasta raiz do projeto, execute:
    ```bash
    uvicorn src.app:app --host 0.0.0.0 --port 5000 --reload
    ```

A API estarÃ¡ disponÃ­vel em `http://localhost:5000`.

## ğŸ§ª Como Testar a API

1.  **DocumentaÃ§Ã£o Interativa (Swagger UI):**
    A maneira mais fÃ¡cil de testar Ã© acessar a documentaÃ§Ã£o gerada automaticamente no seu navegador:
    [**http://localhost:5000/docs**](http://localhost:5000/docs)

    LÃ¡, vocÃª pode expandir o endpoint `/predict`, clicar em "Try it out", preencher o JSON de exemplo e executar.

2.  **Usando `curl` ou um Cliente de API:**
    Envie uma requisiÃ§Ã£o `POST` para o endpoint `/predict` com os dados do aluno no corpo da requisiÃ§Ã£o.

    **Endpoint:** `POST /predict`
    **URL:** `http://localhost:5000/predict`

    **Exemplo de Payload (Corpo da RequisiÃ§Ã£o):**
    ```json
    {
      "Hours_Studied": 15,
      "Previous_Scores": 85,
      "Sleep_Hours": 7,
      "Distance_from_Home": "Near",
      "Attendance": 95,
      "Gender": "Female",
      "Parental_Education_Level": "Bachelor's",
      "Parental_Involvement": "High",
      "School_Type": "Private",
      "Peer_Influence": "Positive",
      "Extracurricular_Activities": "Yes",
      "Learning_Disabilities": "No",
      "Internet_Access": "Yes",
      "Access_to_Resources": "Good",
      "Teacher_Quality": "Good",
      "Family_Income": "High",
      "Motivation_Level": "High",
      "Tutoring_Sessions": "No",
      "Physical_Activity": "Medium"
    }
    ```

    **Exemplo de Resposta (Sucesso `200 OK`):**
    ```json
    {
      "probability_pass": 0.925,
      "class_pass": "APROVADO",
      "score_pred": 0.925,
      "explain": [
        {
          "feature": "Previous_Scores",
          "value": 85,
          "influence": "positiva"
        },
        {
          "feature": "Hours_Studied",
          "value": 15,
          "influence": "positiva"
        },
        {
          "feature": "Parental_Involvement",
          "value": "High",
          "influence": "positiva"
        }
      ]
    }
    ```